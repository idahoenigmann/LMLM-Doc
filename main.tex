\documentclass[11pt,a4paper,openany]{book}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage[style=verbose,
indexing=cite,
backend=biber,
sorting=nyt,
maxcitenames=1, 
mincitenames=1, 
maxbibnames=999, 
minbibnames=999,
refsection=section,
doi=true,
url=true]{biblatex}
\usepackage{subfiles}
\usepackage{makecell}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{lipsum}
\usepackage[super]{nth}
\usepackage{imakeidx}
%\usepackage{hyperref}

%Header for the first page
\pagestyle{fancy}
\fancyhf{}
\setlength{\headheight}{45pt}

\lhead{
  \includegraphics[width=3cm]{img/htlwrn_logo}  
}
\chead{\Large HTBLuVA Wiener Neustadt \\ \normalsize Höhere Lehranstalt für Informatik}
\rhead{
  \includegraphics[width=3cm]{img/htlwrn_logo2}
}

\newcommand{\parseauthor}[3]{\makecell{#1 \\ #2} & #3}

%definitions for easier costumization
\def \title {DIPLOMARBEIT}
\def \subtitle {Localisation via ML Methods}
\def \year {2019/20}
\def \authors { \parseauthor{Algorithm}{Ida Hönigmann}{5AHIF}\\
                \parseauthor{System Engineering}{Peter Kain}{5AHIF}}
\def \supervisor {MMag. Dr. Michael Stifter}
\def \declauthors{ Ida HÖNIGMANN & Peter KAIN}

\graphicspath{ {img/} }

\setlength{\parindent}{0em}

\geometry{
 a4paper,
 left=30mm,
 top=50mm,
 }


\addbibresource{main.bib}

\makeindex[title=Index]
\makeindex[name=allgemein, title=Common Index]
\makeindex[name=name,title={Authors Index}]	% do not even think about changing this from name to author
\makeindex[name=title,columns=1,title={Literature Index}]
\indexsetup{level=\subsection*, toclevel=subsection, noclearpage}


\makeatletter
\@ifpackageloaded{biblatex_legacy}
{\DeclareIndexNameFormat{default}{%
		\usebibmacro{index:name}{\index[name]}{#1}{#3}{#5}{#7}}}
{\DeclareIndexNameFormat{default}{%
		\usebibmacro{index:name}{\index[name]}
		{\namepartfamily}
		{\namepartgiven}
		{\namepartprefix}
		{\namepartsuffix}}}
\makeatother

\DeclareIndexFieldFormat{indextitle}{%
	\usebibmacro{index:title}{\index[title]}{#1}}

\renewbibmacro*{bibindex}{%
	\ifbibindex
	{\indexnames{author}%
		\indexnames{editor}%
		\indexnames{translator}%
		\indexnames{commentator}%
		\indexfield{indextitle}}
	{}}

\makeatletter
\DeclareCiteCommand{\repeatfootcite}[\cbx@wrap]
{\gdef\cbx@keys{}}
{\xappto\cbx@keys{\thefield{entrykey},}}
{}
{\ifcsundef{cbx@lastin@\cbx@keys @\strfield{postnote}}
	{\csnumgdef{cbx@lastin@\cbx@keys @\strfield{postnote}}{-1}}{}%
	\ifsamepage{\value{instcount}}{\csuse{cbx@lastin@\cbx@keys @\strfield{postnote}}}
	{\footnotemark[\csuse{cbx@lastfn@\cbx@keys @\strfield{postnote}}]}
	{\xappto\cbx@cite{\noexpand\footcite%
			[\thefield{prenote}][\thefield{postnote}]{\cbx@keys}%
			\csnumgdef{cbx@lastfn@\cbx@keys @\strfield{postnote}}{\value{\@mpfn}}%
			\csnumgdef{cbx@lastin@\cbx@keys @\strfield{postnote}}{\value{instcount}}}}}

\newrobustcmd{\cbx@wrap}[1]{#1\cbx@cite\gdef\cbx@cite{}}
\def\cbx@cite{}
\makeatother

\begin{document}
	%include titlepage
	\input{sections/titlepage}
	
	%include acknowledgements, abstract and documentation
	
	\pagestyle{plain}
	
	\frontmatter
	
	\pagenumbering{roman}
	\input{sections/declarationof}
	
	\tableofcontents
	
	\input{sections/acknowledgement}
	\input{sections/abstract}
	
	%include thesis
	
	\mainmatter
	\pagenumbering{arabic}
	
	\input{sections/introduction}
	%\input{sections/project_management}
	\input{sections/study_of_literature}
	\input{sections/methodology}
	\input{sections/ros2}
	\input{sections/implementation}
	\input{sections/experiment1}
	\input{sections/lessons_learned}
	\input{sections/experiment2}
	\input{sections/conclusion}
	
	

	\newpage
	\chapter*{Index}
	\printindex[name]
	\printindex[title]
	
	\printbibliography
	
	\include{messbox}

\end{document}